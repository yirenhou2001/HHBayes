% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/GenSyn.R
\name{GenSyn}
\alias{GenSyn}
\title{Simulate households, estimate transmission, and (optionally) summarize}
\usage{
GenSyn(
  synthetic_data = TRUE,
  data_summary = FALSE,
  postprocessing = TRUE,
  n_households = 10,
  n_runs = 10,
  hh.size = sample(3:7, 1),
  tests.per.week = 1,
  Covariates = FALSE,
  Covariates_list = c("Vaccination status", "Antibody Level"),
  Covariate_specifications = NULL,
  day_series_covariates = TRUE,
  series_cols = NULL,
  comm_covariate_cols = NULL,
  hh_covariate_cols = NULL,
  hh_by_role = FALSE,
  hh_role_covariate_cols = NULL,
  standardize_covariates = TRUE,
  lambda_comm = 0.01,
  lambda_hh = 0.01,
  p.comm.base.infant.fix = 0.002,
  p.comm.multiplier.sibling = 1,
  p.comm.multiplier.parent = 1,
  p.comm.multiplier.elder = 1,
  p.hh.base.infant = 0.2,
  p.hh.multiplier.sibling = 0.5267686,
  p.hh.multiplier.parent = 0.8008933,
  p.hh.multiplier.elder = 0.6008933,
  p.imm.base.sibling = 1e-10,
  p.imm.base.parent = 1e-10,
  p.imm.base.elder = 1e-10,
  partial.immunity.infant = 1e-10,
  partial.immunity.sibling = 1e-10,
  partial.immunity.parent = 1e-10,
  partial.immunity.elder = 1e-10,
  duration.latent = 1,
  duration.infect.inf = 2,
  multiplier.dur.sibpar = 0.5,
  p.detect = 0.999,
  amplitude = 2.6581 * 0,
  phase = -0.408,
  start_date = as.Date("2024-09-21"),
  end_date = as.Date("2025-04-17"),
  latent_par = list(shape = 2, scale = 1),
  report_par = list(shape = 1, scale = 1.5),
  infect_par = list(shape = 3, scale = 2),
  start_par = c(-6, 0.02, -2, rep(0, 6)),
  lambda = 0.01,
  lambda0 = 0.2,
  lambda_alpha = 5,
  delta0_true = qlogis(0.002),
  alpha0_true = qlogis(0.2),
  true_values = c(delta0 = log(7.148217e-05), gamma2 = log(7.148217e-05 * 4.331956) -
    log(7.148217e-05), gamma3 = log(7.148217e-05 * 1.835466) - log(7.148217e-05), gamma4
    = log(7.148217e-05 * 2) - log(7.148217e-05), alpha0 = log(0.2888953), beta2 =
    log(0.2888953 * 0.5267686) - log(0.2888953), beta3 = log(0.2888953 * 0.8008933) -
    log(0.2888953), beta4 = log(0.2888953 * 0.6008933) - log(0.2888953))
)
}
\arguments{
\item{synthetic_data}{Logical. Must be \code{TRUE}. If \code{FALSE}, an error is thrown with
guidance to use \code{\link{TransmissionChainAnalysis}}.}

\item{data_summary}{Logical. If \code{TRUE}, prints \code{results$summarized_data}. Default \code{FALSE}.}

\item{postprocessing}{Logical. If \code{TRUE}, prints \code{\link{postprocessing_estimates}}. Default \code{TRUE}.}

\item{n_households}{Integer. Number of households to simulate. Default \code{10}.}

\item{n_runs}{Integer. Repeated estimation runs. Default \code{10}.}

\item{hh.size}{Integer. Household size (constant across HHs unless a random draw is passed).
Default \code{sample(3:7, 1)}.}

\item{tests.per.week}{Integer. Tests per person per week (1–3). Default \code{1}.}

\item{Covariates}{Logical. Generate synthetic covariates. Default \code{FALSE}.}

\item{Covariates_list}{Character vector of covariate names to generate when \code{Covariates=TRUE}.
Default \code{c("Vaccination status", "Antibody Level")}.}

\item{Covariate_specifications}{List with per-covariate generation specs (type, dist, time_varying, params).}

\item{day_series_covariates}{Logical. If \code{TRUE}, builds day-series list-columns for covariates in the person–day table. Default \code{TRUE}.}

\item{series_cols}{Character vector of covariate names (pre-normalization) to build as day-series; if \code{NULL}, all detected covariates are used.}

\item{comm_covariate_cols}{Character vector of community-level covariates (no intercept) for the likelihood.}

\item{hh_covariate_cols}{Character vector of household covariates shared across roles.}

\item{hh_by_role}{Logical. If \code{TRUE}, fit role-specific household covariates.}

\item{hh_role_covariate_cols}{Named list with elements \code{infant}, \code{sibling}, \code{adult}, \code{elder}
providing covariate names per role when \code{hh_by_role=TRUE}.}

\item{standardize_covariates}{Logical. Z-score non-binary numeric columns in model matrices. Default \code{TRUE}.}

\item{lambda_comm, lambda_hh}{Numeric. L2 penalties for community and household covariate coefficients.}

\item{p.comm.base.infant.fix, p.comm.multiplier.sibling, p.comm.multiplier.parent, p.comm.multiplier.elder}{Community infection baseline and role multipliers used in simulation.}

\item{p.hh.base.infant, p.hh.multiplier.sibling, p.hh.multiplier.parent, p.hh.multiplier.elder}{Household transmission baseline and role multipliers used in simulation.}

\item{p.imm.base.sibling, p.imm.base.parent, p.imm.base.elder}{Baseline immunity probabilities.}

\item{partial.immunity.infant, partial.immunity.sibling, partial.immunity.parent, partial.immunity.elder}{Breakthrough modifiers for partially immune individuals.}

\item{duration.latent, duration.infect.inf, multiplier.dur.sibpar}{Natural-history durations used in simulation.}

\item{p.detect}{Detection probability in testing algorithm.}

\item{amplitude, phase}{Seasonal modulation of community risk.}

\item{start_date, end_date}{Simulation window as \code{Date}.}

\item{latent_par, report_par, infect_par}{Lists with Gamma(\code{shape}, \code{scale}) parameters for imputation of latent delay,
reporting delay, and infectious period.}

\item{start_par}{Numeric vector of initial parameters (auto-expanded if length mismatches model).}

\item{lambda}{Base L2 penalty for slope-like parameters (age multipliers and household role offsets).}

\item{lambda0}{Penalty anchoring \code{delta0} near \code{delta0_true}.}

\item{lambda_alpha}{Penalty anchoring \code{alpha0} near \code{alpha0_true}.}

\item{delta0_true, alpha0_true}{Numeric anchors (logit scale) for community baseline and household baseline.}

\item{true_values}{Optional named numeric vector of reference values. Names
should match columns in \code{theta_mat}. Unmatched names are ignored; missing
references yield \code{NA} bias/relative bias.}
}
\value{
(Invisibly) a list with elements:
\itemize{
\item \code{results}: Output of \code{\link{main_parameter_estimation_pipeline}} (raw simulations, summaries, person-day, estimates).
\item \code{postprocessing}: The table returned by \code{\link{postprocessing_estimates}} (or \code{NULL} if \code{postprocessing=FALSE}).
}
}
\description{
Generates synthetic household transmission data and runs the full parameter
estimation pipeline. By default, it prints a post-processing table comparing
the mean estimates to “true” values (bias and relative bias). Optionally,
it prints a per-individual data summary produced by the pipeline.
}
\details{
This function is a thin wrapper around \code{\link{main_parameter_estimation_pipeline}}
with \code{synthetic_data=TRUE}. Any extra columns generated (e.g., covariates) are automatically
carried into the summarization and may be used in the likelihood via the covariate mapping arguments.
}
\section{Workflow}{

\enumerate{
\item Simulate households and test records.
\item Summarize individuals and impute infection timelines.
\item Build a person–day table and run repeated ML estimation.
\item (Optional) Print data summary and post-processing table.
}
}

\examples{
\dontrun{
out <- GenSyn(n_households = 50, n_runs = 20, Covariates = TRUE)
names(out)
head(out$results$person_day)
}
}
\seealso{
\code{\link{TransmissionChainAnalysis}}, \code{\link{main_parameter_estimation_pipeline}},
\code{\link{postprocessing_estimates}}
}
